(this.webpackJsonpworld=this.webpackJsonpworld||[]).push([[0],{22:function(e,t,n){e.exports={chat__container:"Chat_chat__container__1b5JB",loading:"Chat_loading__bNtEN",chat_form:"Chat_chat_form__3EfcJ"}},23:function(e,t,n){e.exports={block__container:"Block_block__container__2r765",anim:"Block_anim__38VR2",openSetAnim:"Block_openSetAnim__16SFi"}},28:function(e,t,n){e.exports={conversation__container:"Conversation_conversation__container__KPhM2",wrapper:"Conversation_wrapper__2ncYM"}},41:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(19),o=n.n(s),i=(n(41),n(12)),r=n(7),l=n(10),u=n(13),g=(n(32),"ADD_MESSAGE"),_="UPDATE_NAME",b="SWITCH_HIGHTLIGHT",m="CREATE_MESSAGE",j=n.p+"static/media/pop.ce6c9687.mp3",d=function(e,t,n){return{type:_,payload:{id:e,name:t,color:n}}},p=function(e){return{type:b,payload:{val:e}}},f=function(e,t,n,a){""!==t.trim()&&(localStorage.setItem("color",n),localStorage.setItem("name",t),localStorage.setItem("id",e),a(d(e,t,n)),a(p(!0)),setTimeout((function(){a(p(!1))}),3e3))},h=n(22),O=n.n(h),v=n(23),S=n.n(v),x=n(3),y=function(e){var t=e.message,n=e.name,a=e.color,c=e.anim;return Object(x.jsxs)("div",{style:{backgroundColor:a},className:c?S.a.block__container+" "+S.a.anim:S.a.block__container,children:[Object(x.jsx)("h6",{children:n}),Object(x.jsx)("h3",{children:t})]})},I=n(28),k=n.n(I),A=function(e){var t=e.loadanim,n=Object(r.c)((function(e){return e.app.messages})),s=c.a.createRef();return Object(a.useEffect)((function(){var e=s.current.scrollHeight;s.current.scrollTop=e}),[n,s]),Object(x.jsx)("div",{className:k.a.conversation__container,children:Object(x.jsx)("div",{ref:s,className:k.a.wrapper,children:n.map((function(e){return Object(x.jsx)(y,{message:e.message,anim:!!(n[n.length-1].id_message===e.id_message&t),color:e.color,name:e.name},e.id_message)}))})})},E=n(8),w=n.n(E),C=n.p+"static/media/send.9010885d.svg",N=n.p+"static/media/accept.46918b1b.svg",D=function(e){var t=e.act_settings,n=e.current_user,c=e.setActSetting,s=e.setting_open,o=Object(a.useState)({display:"none"}),i=Object(l.a)(o,2),u=i[0],g=i[1],_=Object(a.useState)(""),b=Object(l.a)(_,2),m=b[0],j=b[1],d=Object(r.c)((function(e){return e.app.highlighting})),p=Object(r.b)(),h=Object(a.useRef)(),O=function(e){!h.current.contains(e.target)&!s.current.contains(e.target)&&c(!1)};return Object(a.useEffect)((function(){return document.addEventListener("mousedown",O),function(){return document.removeEventListener("mousedown",O)}})),Object(a.useEffect)((function(){t?g({display:"block"}):setTimeout((function(){return g({display:"none"})}),200),j(n.name)}),[t,n.name]),Object(x.jsxs)("div",{style:u,className:t?w.a.settings+" "+w.a.open__settings:w.a.settings+" "+w.a.close__settings,onClick:function(){return c(!0)},ref:h,children:[Object(x.jsx)("span",{className:w.a.highlighting+" "+(d?w.a.on:w.a.off),children:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u043e!"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"\u0418\u043c\u044f"}),Object(x.jsxs)("form",{className:w.a.input_block,onSubmit:function(e){return function(e){e.preventDefault(),localStorage.getItem("color")?f(Date.now(),m,localStorage.getItem("color"),p):f(Date.now(),m,n.color,p)}(e)},children:[Object(x.jsx)("input",{value:m,autoFocus:!0,onChange:function(e){return function(e){e.target.value.length<=23&&j(e.target.value)}(e)}}),Object(x.jsx)("button",{type:"submit",children:Object(x.jsx)("img",{src:N,alt:""})})]})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"\u0426\u0432\u0435\u0442 \u0434\u0438\u0430\u043b\u043e\u0433\u0430"}),Object(x.jsx)("div",{className:w.a.block_color,children:["#345444","#433454","#54344f","#543437","#345254","#343654","#515434","#503057"].map((function(e,t){return Object(x.jsx)("div",{className:w.a.colors+(n.color===e?" "+w.a._active:""),onClick:function(){return function(e){localStorage.getItem("name")?f(Date.now(),localStorage.getItem("name"),e,p):f(Date.now(),n.name,e,p)}(e)},style:{backgroundColor:e}},t)}))})]})]})},T=function(e){var t=e.act_settings,n=e.setActSetting,c=e.setting_open,s=Object(a.useState)(""),o=Object(l.a)(s,2),i=o[0],g=o[1],_=Object(r.c)((function(e){return e.app.currentUser})),b=Object(r.c)((function(e){return e.app.messages})),m=Object(a.useState)(1),d=Object(l.a)(m,2),p=d[0],f=d[1],h=Object(a.useState)(!1),v=Object(l.a)(h,2),S=v[0],y=v[1],I=function(e){e.preventDefault(),f(p+1),p<=2&&""!==i.trim()&&(!function(e,t,n,a){var c={id:e,id_message:(new Date).getUTCMilliseconds()+Date.now(),message:t,name:n,color:a},s=u.a.database();s.ref("messages").push(c),s.ref("messages").once("value",(function(e){var t=e.val();s.ref("messages").child(Object.keys(t)[0]).remove()})),new Audio(j).play()}(_.id,i,_.name,_.color),y(!0),g(""))};return Object(a.useEffect)((function(){setInterval((function(){f(1)}),2e3)}),[]),Object(x.jsxs)("div",{className:O.a.chat__container,children:[Object(x.jsx)(D,{act_settings:t,current_user:_,setActSetting:n,setting_open:c}),Object(x.jsx)(A,{loadanim:S}),0===b.length&&Object(x.jsx)("div",{className:O.a.loading,children:"Loading..."}),Object(x.jsxs)("form",{className:O.a.chat_form,onSubmit:function(e){return I(e)},children:[Object(x.jsx)("input",{value:i,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",autoFocus:!0,onChange:function(e){return function(e){e.target.value.length<=500&&g(e.target.value)}(e)}}),Object(x.jsx)("button",{type:"submit",children:Object(x.jsx)("img",{src:C,alt:""})})]})]})},R=n.p+"static/media/Ic_settings_48px.262b7422.svg",U=n.p+"static/media/fire.8ce276ff.png",B=function(){u.a.apps.length?u.a.app():u.a.initializeApp({apiKey:"AIzaSyCb9QPjqI6qS26ekA-8UxQaMLoeReQSU3c",authDomain:"chat-3a1bb.firebaseapp.com",databaseURL:"https://chat-3a1bb-default-rtdb.firebaseio.com",projectId:"chat-3a1bb",storageBucket:"chat-3a1bb.appspot.com",messagingSenderId:"273094649471",appId:"1:273094649471:web:c74745a4fe24ecd38cc14a"});var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],s=u.a.database().ref("messages"),o=Object(r.b)(),i=Object(a.useRef)();return Object(a.useEffect)((function(){s.on("value",(function(e){var t=e.val(),n=[];Object.keys(t).map((function(e){return n.push(t[e])})),o({type:m,payload:{messages:n}})})),!!localStorage.getItem("id")&!!localStorage.getItem("name")&!!localStorage.getItem("color")&&o(d(localStorage.getItem("id"),localStorage.getItem("name"),localStorage.getItem("color")))}),[o,s]),Object(x.jsxs)("div",{className:"field container",children:[Object(x.jsxs)("div",{className:"header",children:[Object(x.jsxs)("h1",{children:["Boiler",Object(x.jsx)("img",{src:U,className:"fire_img"})]}),Object(x.jsx)("img",{src:R,className:n?"active":"disable",onClick:function(){c(!n)},ref:i,alt:""})]}),Object(x.jsx)(T,{setting_open:i,act_settings:n,setActSetting:c})]})},M=n(34),L=n(35),F=n(36),H=n(11),J={messages:[],currentUser:{id:Date.now(),name:"noname",color:"#345444"},highlighting:!1},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(H.a)(Object(H.a)({},e),{},{messages:Object(F.a)(e.messages)});case m:return Object(H.a)(Object(H.a)({},e),{},{messages:t.payload.messages});case _:return Object(H.a)(Object(H.a)({},e),{},{currentUser:{id:t.payload.id,name:t.payload.name,color:t.payload.color}});case b:return Object(H.a)(Object(H.a)({},e),{},{highlighting:t.payload.val});default:return e}},G=Object(i.c)({app:z}),P=Object(i.e)(G,Object(i.d)(Object(i.a)(M.a)));o.a.render(Object(x.jsx)(L.a,{children:Object(x.jsx)(r.a,{store:P,children:Object(x.jsx)(B,{})})}),document.getElementById("root"))},8:function(e,t,n){e.exports={settings:"Settings_settings__1ubZi",highlighting:"Settings_highlighting__3nuIu",on:"Settings_on__21axI",off:"Settings_off__13VSC",input_block:"Settings_input_block__3ag4R",block_color:"Settings_block_color__ZaCsE",colors:"Settings_colors__g-zFX",_active:"Settings__active__3ngYf",open__settings:"Settings_open__settings__1nO2X",openSetAnim:"Settings_openSetAnim__zxJ2D",close__settings:"Settings_close__settings__2ElFC",closeSetAnim:"Settings_closeSetAnim__1ynu9"}}},[[49,1,2]]]);
//# sourceMappingURL=main.20d044c0.chunk.js.map